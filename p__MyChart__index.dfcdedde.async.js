"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[743],{90901:function(le,w,n){n.r(w);var Z=n(15009),C=n.n(Z),J=n(99289),d=n.n(J),L=n(97857),f=n.n(L),X=n(5574),O=n.n(X),W=n(28008),ne=n(2453),M=n(71230),V=n(15746),U=n(26713),$=n(71577),x=n(51158),Q=n(4393),T=n(29905),Y=n(33076),z=n(36934),v=n(67294),o=n(85893),se=function(){var H={fontWeight:"bold",fontSize:"large"},B={current:1,pageSize:4,sortField:"createTime",sortOrder:"desc"},oe=(0,v.useState)(f()({},B)),R=O()(oe,2),l=R[0],c=R[1],_=(0,v.useState)(),p=O()(_,2),i=p[0],e=p[1],s=(0,v.useState)(0),t=O()(s,2),r=t[0],a=t[1],g=(0,v.useState)(!0),E=O()(g,2),j=E[0],S=E[1],I=function(){var b=d()(C()().mark(function u(){var h,k,ee;return C()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return S(!0),y.prev=1,y.next=4,(0,W.MW)(l);case 4:h=y.sent,h.data?(e((k=h.data.records)!==null&&k!==void 0?k:[]),a((ee=h.data.total)!==null&&ee!==void 0?ee:0),h.data.records&&h.data.records.forEach(function(te){if(te.status==="succeed"){var re,ie=JSON.parse((re=te.genChart)!==null&&re!==void 0?re:"{}");ie.title=void 0,te.genChart=JSON.stringify(ie)}})):ne.ZP.error("\u83B7\u53D6\u6211\u7684\u56FE\u8868\u5931\u8D25"),y.next=11;break;case 8:y.prev=8,y.t0=y.catch(1),ne.ZP.error("\u83B7\u53D6\u6211\u7684\u56FE\u8868\u5931\u8D25\uFF0C"+y.t0.message);case 11:S(!1);case 12:case"end":return y.stop()}},u,null,[[1,8]])}));return function(){return b.apply(this,arguments)}}();(0,v.useEffect)(function(){I()},[l]);var q=(0,v.useState)(6),K=O()(q,2),D=K[0],F=K[1],G=(0,v.useRef)(D);return(0,v.useEffect)(function(){G.current=D},[D]),(0,v.useEffect)(function(){var b=setInterval(function(){if(console.log("\u5B9A\u65F6\u5668count=".concat(G.current)),I(),G.current===0){clearInterval(b);return}F(function(u){return u-1})},5e3)},[]),(0,o.jsxs)("div",{className:"my-chart-page",children:[(0,o.jsxs)(M.Z,{gutter:24,children:[(0,o.jsx)(V.Z,{span:22,children:(0,o.jsx)("div",{children:(0,o.jsx)(Y.Z,{placeholder:"\u8BF7\u8F93\u5165\u60A8\u8981\u627E\u7684\u56FE\u8868\u540D\u79F0",enterButton:!0,loading:j,onSearch:function(u){c(f()(f()({},B),{},{name:u}))}})})}),(0,o.jsx)(V.Z,{span:1,children:(0,o.jsx)("div",{children:(0,o.jsx)(U.Z,{children:(0,o.jsx)($.ZP,{type:"primary",onClick:function(){return I()},children:"\u5237\u65B0"})})})})]}),(0,o.jsx)("p",{}),(0,o.jsx)("div",{className:"margin-16"}),(0,o.jsx)(x.ZP,{grid:{gutter:16,xs:1,sm:1,md:1,lg:2,xl:2,xxl:2},pagination:{onChange:function(u,h){c(f()(f()({},l),{},{current:u,pageSize:h}))},current:l.current,pageSize:l.pageSize,total:r},loading:j,dataSource:i,renderItem:function(u){var h;return(0,o.jsx)(x.ZP.Item,{children:(0,o.jsxs)(Q.Z,{style:{width:"100%"},children:[(0,o.jsx)(x.ZP.Item.Meta,{style:{fontWeight:"bold"},title:(0,o.jsx)("div",{style:H,children:u.name}),description:u.chartType&&u.goal?"\u56FE\u8868\u7C7B\u578B\uFF1A"+u.chartType+" ------- \u5206\u6790\u76EE\u6807\uFF1A"+u.goal:void 0}),(0,o.jsxs)(o.Fragment,{children:[u.status==="wait"&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(T.ZP,{status:"warning",title:"\u5F85\u751F\u6210",subTitle:(h=u.execMessage)!==null&&h!==void 0?h:"\u5F53\u524D\u56FE\u8868\u751F\u6210\u961F\u5217\u7E41\u5FD9\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5019"})}),u.status==="running"&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(T.ZP,{status:"info",title:"\u56FE\u8868\u751F\u6210\u4E2D",subTitle:u.execMessage})}),u.status==="succeed"&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{}),(0,o.jsx)(z.Z,{option:u.genChart&&JSON.parse(u.genChart)}),(0,o.jsx)("p",{style:H,children:"\u5206\u6790\u7ED3\u8BBA"}),u.genResult]}),u.status==="failed"&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(T.ZP,{status:"error",title:"\u56FE\u8868\u751F\u6210\u5931\u8D25",subTitle:u.execMessage})})]})]})},u.id)}})]})};w.default=se},28008:function(le,w,n){n.d(w,{I6:function(){return Y},MW:function(){return H},VG:function(){return Q}});var Z=n(52677),C=n.n(Z),J=n(15009),d=n.n(J),L=n(97857),f=n.n(L),X=n(99289),O=n.n(X),W=n(35312);function ne(l,c){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function l(c,_){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/chart/add",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:c},_||{})));case 1:case"end":return i.stop()}},l)})),M.apply(this,arguments)}function V(l,c){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function l(c,_){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/chart/delete",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:c},_||{})));case 1:case"end":return i.stop()}},l)})),U.apply(this,arguments)}function $(l,c){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function l(c,_){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/chart/edit",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:c},_||{})));case 1:case"end":return i.stop()}},l)})),x.apply(this,arguments)}function Q(l,c,_,p){return T.apply(this,arguments)}function T(){return T=O()(d()().mark(function l(c,_,p,i){var e;return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new FormData,p&&e.append("file",p),Object.keys(_).forEach(function(r){var a=_[r];a!=null&&e.append(r,C()(a)==="object"&&!(a instanceof File)?JSON.stringify(a):a)}),t.abrupt("return",(0,W.request)("/api/chart/gen",f()({method:"POST",params:f()({},c),data:e,requestType:"form"},i||{})));case 4:case"end":return t.stop()}},l)})),T.apply(this,arguments)}function Y(l,c,_,p){return z.apply(this,arguments)}function z(){return z=O()(d()().mark(function l(c,_,p,i){var e;return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new FormData,p&&e.append("file",p),Object.keys(_).forEach(function(r){var a=_[r];a!=null&&e.append(r,C()(a)==="object"&&!(a instanceof File)?JSON.stringify(a):a)}),t.abrupt("return",(0,W.request)("/api/chart/gen/async",f()({method:"POST",params:f()({},c),data:e,requestType:"form"},i||{})));case 4:case"end":return t.stop()}},l)})),z.apply(this,arguments)}function v(l,c){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function l(c,_){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/chart/get",_objectSpread({method:"GET",params:_objectSpread({},c)},_||{})));case 1:case"end":return i.stop()}},l)})),o.apply(this,arguments)}function se(l,c){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function l(c,_){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/chart/list/page",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:c},_||{})));case 1:case"end":return i.stop()}},l)})),N.apply(this,arguments)}function H(l,c){return B.apply(this,arguments)}function B(){return B=O()(d()().mark(function l(c,_){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,W.request)("/api/chart/my/list/page",f()({method:"POST",headers:{"Content-Type":"application/json"},data:c},_||{})));case 1:case"end":return i.stop()}},l)})),B.apply(this,arguments)}function oe(l,c){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function l(c,_){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/api/chart/update",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:c},_||{})));case 1:case"end":return i.stop()}},l)})),R.apply(this,arguments)}},4393:function(le,w,n){n.d(w,{Z:function(){return i}});var Z=n(94184),C=n.n(Z),J=n(98423),d=n(67294),L=n(53124),f=n(98675),X=n(99559),O=n(88677),W=function(e,s){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t},M=e=>{var{prefixCls:s,className:t,hoverable:r=!0}=e,a=W(e,["prefixCls","className","hoverable"]);const{getPrefixCls:g}=d.useContext(L.E_),E=g("card",s),j=C()(`${E}-grid`,t,{[`${E}-grid-hoverable`]:r});return d.createElement("div",Object.assign({},a,{className:j}))},V=n(67968),U=n(45503),$=n(14747);const x=e=>{const{antCls:s,componentCls:t,cardHeadHeight:r,cardPaddingBase:a,cardHeadTabsMarginBottom:g}=e;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:r,marginBottom:-1,padding:`0 ${a}px`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,background:"transparent",borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`},(0,$.dF)()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},$.vS),{[`
          > ${t}-typography,
          > ${t}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${s}-tabs-top`]:{clear:"both",marginBottom:g,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorderSecondary}`}}})},Q=e=>{const{cardPaddingBase:s,colorBorderSecondary:t,cardShadow:r,lineWidth:a}=e;return{width:"33.33%",padding:s,border:0,borderRadius:0,boxShadow:`
      ${a}px 0 0 0 ${t},
      0 ${a}px 0 0 ${t},
      ${a}px ${a}px 0 0 ${t},
      ${a}px 0 0 0 ${t} inset,
      0 ${a}px 0 0 ${t} inset;
    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},T=e=>{const{componentCls:s,iconCls:t,cardActionsLiMargin:r,cardActionsIconSize:a,colorBorderSecondary:g}=e;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:e.colorBgContainer,borderTop:`${e.lineWidth}px ${e.lineType} ${g}`,display:"flex",borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px `},(0,$.dF)()),{"& > li":{margin:r,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:e.cardActionsIconSize*2,fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${s}-btn), > ${t}`]:{display:"inline-block",width:"100%",color:e.colorTextDescription,lineHeight:`${e.fontSize*e.lineHeight}px`,transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${t}`]:{fontSize:a,lineHeight:`${a*e.lineHeight}px`}},"&:not(:last-child)":{borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${g}`}}})},Y=e=>Object.assign(Object.assign({margin:`-${e.marginXXS}px 0`,display:"flex"},(0,$.dF)()),{"&-avatar":{paddingInlineEnd:e.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":Object.assign({color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG},$.vS),"&-description":{color:e.colorTextDescription}}),z=e=>{const{componentCls:s,cardPaddingBase:t,colorFillAlter:r}=e;return{[`${s}-head`]:{padding:`0 ${t}px`,background:r,"&-title":{fontSize:e.fontSize}},[`${s}-body`]:{padding:`${e.padding}px ${t}px`}}},v=e=>{const{componentCls:s}=e;return{overflow:"hidden",[`${s}-body`]:{userSelect:"none"}}},o=e=>{const{antCls:s,componentCls:t,cardShadow:r,cardHeadPadding:a,colorBorderSecondary:g,boxShadowTertiary:E,cardPaddingBase:j}=e;return{[t]:Object.assign(Object.assign({},(0,$.Wf)(e)),{position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:E},[`${t}-head`]:x(e),[`${t}-extra`]:{marginInlineStart:"auto",color:"",fontWeight:"normal",fontSize:e.fontSize},[`${t}-body`]:Object.assign({padding:j,borderRadius:` 0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`},(0,$.dF)()),[`${t}-grid`]:Q(e),[`${t}-cover`]:{"> *":{display:"block",width:"100%"},[`img, img + ${s}-image-mask`]:{borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`}},[`${t}-actions`]:T(e),[`${t}-meta`]:Y(e)}),[`${t}-bordered`]:{border:`${e.lineWidth}px ${e.lineType} ${g}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:r}},[`${t}-contain-grid`]:{[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:-e.lineWidth,marginInlineStart:-e.lineWidth,padding:0}},[`${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:a}}},[`${t}-type-inner`]:z(e),[`${t}-loading`]:v(e),[`${t}-rtl`]:{direction:"rtl"}}},se=e=>{const{componentCls:s,cardPaddingSM:t,cardHeadHeightSM:r}=e;return{[`${s}-small`]:{[`> ${s}-head`]:{minHeight:r,padding:`0 ${t}px`,fontSize:e.fontSize,[`> ${s}-head-wrapper`]:{[`> ${s}-extra`]:{fontSize:e.fontSize}}},[`> ${s}-body`]:{padding:t}},[`${s}-small${s}-contain-tabs`]:{[`> ${s}-head`]:{[`${s}-head-title, ${s}-extra`]:{minHeight:r,paddingTop:0,display:"flex",alignItems:"center"}}}}};var N=(0,V.Z)("Card",e=>{const s=(0,U.TS)(e,{cardShadow:e.boxShadowCard,cardHeadHeight:e.fontSizeLG*e.lineHeightLG+e.padding*2,cardHeadHeightSM:e.fontSize*e.lineHeight+e.paddingXS*2,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardHeadTabsMarginBottom:-e.padding-e.lineWidth,cardActionsLiMargin:`${e.paddingSM}px 0`,cardActionsIconSize:e.fontSize,cardPaddingSM:12});return[o(s),se(s)]}),H=function(e,s){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t};function B(e){return e.map((t,r)=>d.createElement("li",{style:{width:`${100/e.length}%`},key:`action-${r}`},d.createElement("span",null,t)))}var R=d.forwardRef((e,s)=>{const{prefixCls:t,className:r,rootClassName:a,extra:g,headStyle:E={},bodyStyle:j={},title:S,loading:I,bordered:q=!0,size:K,type:D,cover:F,actions:G,tabList:b,children:u,activeTabKey:h,defaultActiveTabKey:k,tabBarExtraContent:ee,hoverable:de,tabProps:y={}}=e,te=H(e,["prefixCls","className","rootClassName","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),{getPrefixCls:re,direction:ie}=d.useContext(L.E_),pe=A=>{var P;(P=e.onTabChange)===null||P===void 0||P.call(e,A)},me=d.useMemo(()=>{let A=!1;return d.Children.forEach(u,P=>{P&&P.type&&P.type===M&&(A=!0)}),A},[u]),m=re("card",t),[ge,he]=N(m),fe=d.createElement(X.Z,{loading:!0,active:!0,paragraph:{rows:4},title:!1},u),ce=h!==void 0,be=Object.assign(Object.assign({},y),{[ce?"activeKey":"defaultActiveKey"]:ce?h:k,tabBarExtraContent:ee});let ue;const ae=(0,f.Z)(K),ye=!ae||ae==="default"?"large":ae,_e=b&&b.length?d.createElement(O.Z,Object.assign({size:ye},be,{className:`${m}-head-tabs`,onChange:pe,items:b.map(A=>{var P;return{label:A.tab,key:A.key,disabled:(P=A.disabled)!==null&&P!==void 0?P:!1}})})):null;(S||g||_e)&&(ue=d.createElement("div",{className:`${m}-head`,style:E},d.createElement("div",{className:`${m}-head-wrapper`},S&&d.createElement("div",{className:`${m}-head-title`},S),g&&d.createElement("div",{className:`${m}-extra`},g)),_e));const ve=F?d.createElement("div",{className:`${m}-cover`},F):null,Se=d.createElement("div",{className:`${m}-body`,style:j},I?fe:u),Oe=G&&G.length?d.createElement("ul",{className:`${m}-actions`},B(G)):null,Ee=(0,J.Z)(te,["onTabChange"]),Pe=C()(m,{[`${m}-loading`]:I,[`${m}-bordered`]:q,[`${m}-hoverable`]:de,[`${m}-contain-grid`]:me,[`${m}-contain-tabs`]:b&&b.length,[`${m}-${ae}`]:ae,[`${m}-type-${D}`]:!!D,[`${m}-rtl`]:ie==="rtl"},r,a,he);return ge(d.createElement("div",Object.assign({ref:s},Ee,{className:Pe}),ue,ve,Se,Oe))}),l=function(e,s){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t},_=e=>{const{prefixCls:s,className:t,avatar:r,title:a,description:g}=e,E=l(e,["prefixCls","className","avatar","title","description"]),{getPrefixCls:j}=d.useContext(L.E_),S=j("card",s),I=C()(`${S}-meta`,t),q=r?d.createElement("div",{className:`${S}-meta-avatar`},r):null,K=a?d.createElement("div",{className:`${S}-meta-title`},a):null,D=g?d.createElement("div",{className:`${S}-meta-description`},g):null,F=K||D?d.createElement("div",{className:`${S}-meta-detail`},K,D):null;return d.createElement("div",Object.assign({},E,{className:I}),q,F)};const p=R;p.Grid=M,p.Meta=_;var i=p}}]);
