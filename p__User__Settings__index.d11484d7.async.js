"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[942],{94944:function(fa,Z,a){a.r(Z),a.d(Z,{default:function(){return _}});var I=a(15009),p=a.n(I),T=a(97857),j=a.n(T),R=a(99289),G=a.n(R),M=a(5574),o=a.n(M),J=a(86536),f=a(1413),s=a(67294),V=a(15294),y=a(91146),F=function(r,n){return s.createElement(y.Z,(0,f.Z)((0,f.Z)({},r),{},{ref:n,icon:V.Z}))};F.displayName="LoadingOutlined";var $=s.forwardRef(F),z=a(42110),O=function(r,n){return s.createElement(y.Z,(0,f.Z)((0,f.Z)({},r),{},{ref:n,icon:z.Z}))};O.displayName="PlusOutlined";var D=s.forwardRef(O),H=a(35312),v=a(2453),K=a(4393),m=a(61526),Q=a(24311),W=a(66476),X=a(26713),Y=a(71577),b=a(88942),e=a(85893),w=function(r,n){var i=new FileReader;i.addEventListener("load",function(){return n(i.result)}),i.readAsDataURL(r)},k=function(r){var n=r.type==="image/jpeg"||r.type==="image/png";n||v.ZP.error("\u4F60\u53EA\u80FD\u4E0A\u4F20 JPG/PNG \u7684\u6587\u4EF6!");var i=r.size/1024/1024<2;return i||v.ZP.error("\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 2MB!"),n&&i},q=function(){var r=(0,H.useModel)("@@initialState"),n=r.initialState,i=r.setInitialState,l=n.currentUser,aa=(0,s.useState)(!1),P=o()(aa,2),ea=P[0],C=P[1],ta=(0,s.useState)(!1),E=o()(ta,2),h=E[0],U=E[1],ra=(0,b.Z)(),na=o()(ra,1),sa=na[0],la=(0,s.useState)(),x=o()(la,2),ma=x[0],ia=x[1],ua=(0,s.useState)({}),L=o()(ua,2),ga=L[0],da=L[1];(0,s.useEffect)(function(){da(l)},[l]);var oa=function(){var A=G()(p()().mark(function u(c){var B,d,S,N;return p()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!h){t.next=2;break}return t.abrupt("return");case 2:return U(!0),B=j()(j()({},c),{},{file:void 0}),t.prev=4,t.next=7,(0,J.Zn)(B);case 7:if(d=t.sent,d!=null&&d.data){t.next=12;break}v.ZP.error("\u5206\u6790\u5931\u8D25,"+d.message),t.next=18;break;case 12:if(v.ZP.success("\u5206\u6790\u6210\u529F"),N=JSON.parse((S=d.data.genChart)!==null&&S!==void 0?S:""),N){t.next=18;break}throw new Error("\u56FE\u8868\u4EE3\u7801\u89E3\u6790\u9519\u8BEF");case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(4),v.ZP.error("\u5206\u6790\u5931\u8D25,",+t.t0.message);case 23:U(!1);case 24:case"end":return t.stop()}},u,null,[[4,20]])}));return function(c){return A.apply(this,arguments)}}(),va=function(u){if(u.file.status==="uploading"){C(!0);return}u.file.status==="done"&&w(u.file.originFileObj,function(c){C(!1),ia(c)})},ca=(0,e.jsxs)("div",{children:[ea?(0,e.jsx)($,{}):(0,e.jsx)(D,{}),(0,e.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,e.jsxs)("div",{className:"my-chart-page",children:[(0,e.jsx)("div",{className:"margin-16"}),(0,e.jsx)(K.Z,{title:"\u4E2A\u4EBA\u8BBE\u7F6E",children:(0,e.jsxs)(m.Z,{form:sa,name:"addChart",onFinish:oa,labelAlign:"left",labelCol:{span:2,offset:0},children:[(0,e.jsx)(m.Z.Item,{name:"name",label:"\u6635\u79F0",children:(0,e.jsx)(Q.Z,{size:"large",placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0",allowClear:!0,defaultValue:l.userName})}),(0,e.jsx)(m.Z.Item,{name:"avatar",label:"\u5934\u50CF",children:(0,e.jsx)(W.Z,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:k,onChange:va,children:l!=null&&l.userAvatar?(0,e.jsx)("img",{src:l==null?void 0:l.userAvatar,alt:"avatar",style:{width:"90%"}}):"\u4E0A\u4F20\u5934\u50CF"})}),(0,e.jsx)(m.Z.Item,{children:(0,e.jsx)(X.Z,{children:(0,e.jsx)(Y.ZP,{type:"primary",htmlType:"submit",loading:h,disabled:h,children:"\u4FEE\u6539"})})})]})})]})},_=q}}]);
